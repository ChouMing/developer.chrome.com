<link href="../../_static/css/nacl.css" rel="stylesheet" type="text/css">
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cleartype" content="on">
    <link type="image/ico" rel="icon" href="http://www.google.com/images/icons/product/chrome-32.png">

    <link href="../../../static/css/out/site.css" rel="stylesheet" type="text/css">
    <link href="../../../static/css/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="../../../static/css/prettify.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700|Source+Code+Pro' rel='stylesheet' type='text/css'>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-41980257-1');
  ga('send', 'pageview');

</script>

    <title>Dynamic Linking and Loading with glibc - Google Chrome</title>
  </head>

  <body>
    <div id="gc-container">
    <a href="dynamic-loading.html#gc-pagecontent" class="element-invisible element-focusable">Skip to main content</a>

    <header id="topnav" role="banner">
      <div id="logo">
        <a href="../../../index.html">
          <img alt="Chrome: developer" src="../../../static/images/chrome-logo_2x.png">
        </a>
        <span class="collase-icon"><!-- <img src="/static/images/burger-icon.png" class="collase-icon">--></span>
      </div>
      <nav id="fatnav" role="navigation">
      <ul>
          <li class="pillar">
            <span class="toplevel">Devtools</span>
            <ul class="expandee">
                <li class="submenu">Learn Basics
                  <ul>
                      <li class="category">
                        <a href="../../../devtools/index.html">
                        Overview
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/authoring-development-workflow.html">
                        Authoring &amp; Development Workflow
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/console.md">
                        Using the Console
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/tips-and-tricks.html">
                        Tips &amp; Tricks
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/videos.html">
                        Additional Resources
                        </a>
                        <ul>
                            <li><a href="../../../devtools/docs/videos.html">Videos</a>
                            </li>
                            <li><a href="../../../devtools/docs/blog-posts">Blog Posts</a>
                            </li>
                            <li><a href="https://groups.google.com/forum/?fromgroups#!forum/google-chrome-developer-tools">Mailing List</a>
                            </li>
                            <li><a href="../../../devtools/docs/contributing.html">Contributing to DevTools</a>
                            </li>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">Use Tools
                  <ul>
                      <li class="category">
                        <a href="../../../devtools/docs/dom-and-styles.html">
                        Inspecting &amp; Tweaking
                        </a>
                        <ul>
                            <li><a href="../../../devtools/docs/elements">Editing Styles &amp; DOM</a>
                            </li>
                            <li><a href="../../../devtools/docs/css-preprocessors.html">Working with CSS Preprocessors</a>
                            </li>
                            <li><a href="../../../devtools/docs/resource-panel.md">Managing Application Storage</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/javascript-debugging.html">
                        Debugging JavaScript
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/mobile-emulation.html">
                        Mobile Emulation
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/protocol/tot/remote-debugging.html">
                        Remote Debugging on Android
                        </a>
                        <ul>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">Performance &amp; Profiling
                  <ul>
                      <li class="category">
                        <a href="../../../devtools/docs/network.md">
                        Evaluating Network Performance
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/timeline.html">
                        Using the Timeline
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/demos/too-much-layout/index">
                        Timeline Demo: Finding Forced Synchronous Layouts
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/cpu-profiling.html">
                        Profiling JavaScript Performance
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/javascript-memory-profiling.md">
                        JavaScript Memory Profiling
                        </a>
                        <ul>
                            <li><a href="../../../devtools/docs/javascript-memory-profiling.md">JavaScript Memory Profiling</a>
                            </li>
                            <li><a href="../../../devtools/docs/heap-profiling-summary.html">Demos</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/clean-testing-environment.html">
                        Setting Up a Clean Testing Environment
                        </a>
                        <ul>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">Reference
                  <ul>
                      <li class="category">
                        <a href="../../../devtools/docs/console-api.md">
                        Console API Reference
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/commandline-api.md">
                        Command Line API Reference
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/integrating.md">
                        DevTools Extensions API
                        </a>
                        <ul>
                            <li><a href="../../../devtools/docs/integrating.md">Integrating with DevTools</a>
                            </li>
                            <li><a href="../../../devtools/docs/sample-extensions.md">Sample DevTools Extensions</a>
                            </li>
                            <li><a href="../../../devtools/docs/debugging-clients.md">Sample DevTools Protocol Clients</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/shortcuts.html">
                        Keyboard Shortcuts
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/settings.html">
                        Settings
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/debugger-protocol.html">
                        Remote Debugging Protocol
                        </a>
                        <ul>
                            <li><a href="../../../devtools/docs/debugger-protocol.html">Remote Debugging Protocol</a>
                            </li>
                            <li><a href="../../../devtools/docs/protocol/1.1/index.html">Version 1.1</a>
                            </li>
                            <li><a href="../../../devtools/docs/protocol/1.0/index.html">Version 1.0</a>
                            </li>
                            <li><a href="../../../devtools/docs/protocol/0.1/index.html">Version .1</a>
                            </li>
                            <li><a href="../../../devtools/docs/protocol/tot/index.html">Tip-of-tree</a>
                            </li>
                        </ul>
                      </li>
                  </ul>
                </li>
            </ul>
          </li>
          <li class="pillar">
            <span class="toplevel">Multi-device</span>
            <ul class="expandee">
                <li class="submenu">Getting Started
                  <ul>
                      <li class="category">
                        <a href="../../../multidevice/index.html">
                        Chrome for a Multi-Device World
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../multidevice/data-compression">
                        Data Compression Proxy
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../multidevice/user-agent.html">
                        User Agents
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/mobile-emulation.html">
                        Mobile Emulation
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../devtools/docs/protocol/tot/remote-debugging.html">
                        Remote Debugging
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../multidevice/faq.html">
                        FAQ
                        </a>
                        <ul>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">Chrome for Android
                  <ul>
                      <li class="category">
                        <a href="../../../multidevice/android/overview.html">
                        Overview
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../multidevice/android/intents.html">
                        Android Intents with Chrome
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../multidevice/android/installtohomescreen.html">
                        Add to Homescreen
                        </a>
                        <ul>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">Chrome WebView
                  <ul>
                      <li class="category">
                        <a href="../../../multidevice/webview/overview.html">
                        WebView for Android
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../multidevice/webview/gettingstarted.html">
                        Getting Started
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../multidevice/webview/pixelperfect">
                        Pixel-Perfect UI
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../multidevice/webview/workflow.html">
                        WebView Workflow
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../multidevice/webview/tipsandtricks">
                        Tips &amp; Tricks
                        </a>
                        <ul>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">Chrome for iOS
                  <ul>
                      <li class="category">
                        <a href="../../../multidevice/ios/overview.html">
                        Overview
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../multidevice/ios/links.html">
                        Opening Links in Chrome
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../multidevice/ios/case-studies">
                        Case Studies
                        </a>
                        <ul>
                            <li><a href="../../../multidevice/ios/case-studies">Case Studies</a>
                            </li>
                            <li><a href="../../../multidevice/ios/pocket.html">Pocket</a>
                            </li>
                            <li><a href="../../../multidevice/ios/feedly.html">Feedly</a>
                            </li>
                        </ul>
                      </li>
                  </ul>
                </li>
            </ul>
          </li>
          <li class="pillar">
            <span class="toplevel">Platform</span>
            <ul class="expandee">
                <li class="submenu">Apps
                  <ul>
                      <li class="category">
                        <a href="../../../apps/index.html">
                        Learn Basics
                        </a>
                        <ul>
                            <li><a href="../../../apps/index.html">What Are Chrome Apps?</a>
                            </li>
                            <li><a href="../../../apps/first_app.html">Create Your First App</a>
                            </li>
                            <li><a href="../../../apps/app_architecture.html">App Architecture</a>
                            </li>
                            <li><a href="../../../extensions/app_lifecycle.html">App Lifecycle</a>
                            </li>
                            <li><a href="../../../apps/contentSecurityPolicy.html">Content Security Policy</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../apps/app_codelab1_setup.html">
                        Learn with Codelab
                        </a>
                        <ul>
                            <li><a href="../../../apps/app_codelab1_setup.html">1 - Set Up Development Environment</a>
                            </li>
                            <li><a href="../../../apps/app_codelab2_basic.html">2 - Create Basic App</a>
                            </li>
                            <li><a href="../../../apps/app_codelab3_mvc.html">3 - Create MVC</a>
                            </li>
                            <li><a href="../../../apps/app_codelab5_data.html">4 - Save &amp; Fetch Data</a>
                            </li>
                            <li><a href="../../../apps/app_codelab6_lifecycle.html">5 - Manage App Lifecycle</a>
                            </li>
                            <li><a href="../../../apps/app_codelab7_useridentification.html">6 - Access User's Data</a>
                            </li>
                            <li><a href="../../../apps/app_codelab8_webresources.html">7 - Access Web Resources</a>
                            </li>
                            <li><a href="../../../apps/app_codelab_10_publishing.html">8 - Publish App</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../apps/samples.html">
                        Samples
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../apps/offline_apps.html">
                        Develop in the Cloud
                        </a>
                        <ul>
                            <li><a href="../../../apps/offline_apps.html">Offline First</a>
                            </li>
                            <li><a href="../../../extensions/app_external.html">Handling External Content</a>
                            </li>
                            <li><a href="../../../apps/app_storage.html">Storing Data</a>
                            </li>
                            <li><a href="../../../apps/cloudMessaging.html">Cloud Messaging</a>
                            </li>
                            <li><a href="../../../apps/app_identity.html">User Authentication</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../apps/app_usb.html">
                        User Low-Level System Services
                        </a>
                        <ul>
                            <li><a href="../../../apps/app_usb.html">USB</a>
                            </li>
                            <li><a href="../../../apps/app_serial">Serial</a>
                            </li>
                            <li><a href="../../../apps/app_network.html">Network Communications</a>
                            </li>
                            <li><a href="../../../apps/app_bluetooth.html">Bluetooth</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../apps/app_frameworks.html">
                        MVC Architecture &amp; Frameworks
                        </a>
                        <ul>
                            <li><a href="../../../apps/app_frameworks.html">About MVC Architecture</a>
                            </li>
                            <li><a href="../../../apps/angular_framework.html">Build Apps with AngularJS</a>
                            </li>
                            <li><a href="../../../apps/sencha_framework.html">Build Apps with SenchaJS</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../extensions/publish_app.html">
                        Distribute Apps
                        </a>
                        <ul>
                            <li><a href="../../../extensions/publish_app.html">Publish Your App</a>
                            </li>
                            <li><a href="../../../apps/google_wallet.html">Monetize Your App</a>
                            </li>
                            <li><a href="../../../webstore/one_time_payments">One-Time Payments</a>
                            </li>
                            <li><a href="../../../apps/analytics.html">Analytics</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../apps/api_index.html">
                        Chrome Platform APIs
                        </a>
                        <ul>
                            <li><a href="../../../apps/api_index.html">JavaScript APIs</a>
                            </li>
                            <li><a href="../../../apps/manifest.html">Manifest File Format</a>
                            </li>
                            <li><a href="../../../apps/webview.html">Webview Tag</a>
                            </li>
                            <li><a href="../../../apps/api_other.html">Web APIs</a>
                            </li>
                            <li><a href="../../../apps/app_deprecated.html">Disabled Web Features</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../apps/faq">
                        Help
                        </a>
                        <ul>
                            <li><a href="../../../apps/faq">FAQ</a>
                            </li>
                            <li><a href="https://groups.google.com/a/chromium.org/forum/#!forum/chromium-apps">Google Groups</a>
                            </li>
                            <li><a href="http://stackoverflow.com/questions/tagged/google-chrome-app">Stack Overflow</a>
                            </li>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">Extensions
                  <ul>
                      <li class="category">
                        <a href="../../../apps/overview.html">
                        Learn Basics
                        </a>
                        <ul>
                            <li><a href="../../../apps/overview.html">Overview</a>
                            </li>
                            <li><a href="../../../extensions/hosting_changes">Hosting Changes</a>
                            </li>
                            <li><a href="../../../extensions/event_pages.html">Event Pages</a>
                            </li>
                            <li><a href="../../../extensions/content_scripts.html">Content Scripts</a>
                            </li>
                            <li><a href="../../../apps/activeTab.html">activeTab Permission</a>
                            </li>
                            <li><a href="../../../extensions/whats_new.html">What's New?</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../apps/getstarted.html">
                        Getting Started Tutorial
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../extensions/samples.html">
                        Samples
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../extensions/tut_migration_to_manifest_v2">
                        Develop Extensions
                        </a>
                        <ul>
                            <li><a href="../../../extensions/a11y.html">Accessibility</a>
                            </li>
                            <li><a href="../../../extensions/contentSecurityPolicy.html">Content Security Policy</a>
                            </li>
                            <li><a href="../../../extensions/xhr.html">Cross-Origin XHR</a>
                            </li>
                            <li><a href="../../../extensions/tut_debugging">Debugging</a>
                            </li>
                            <li><a href="../../../extensions/i18n.html">Internationalization</a>
                            </li>
                            <li><a href="../../../extensions/messaging">Message Passing</a>
                            </li>
                            <li><a href="../../../extensions/tut_migration_to_manifest_v2">Migrate to Manifest 2</a>
                            </li>
                            <li><a href="../../../extensions/tut_oauth">OAuth</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../extensions/hosting.html">
                        Distribute Extensions
                        </a>
                        <ul>
                            <li><a href="../../../extensions/hosting.html">Hosting</a>
                            </li>
                            <li><a href="../../../extensions/packaging.html">Packaging</a>
                            </li>
                            <li><a href="../../../webstore/one_time_payments">One-Time Payments</a>
                            </li>
                            <li><a href="../../../extensions/autoupdate.html">Autoupdating</a>
                            </li>
                            <li><a href="../../../extensions/external_extensions.html">Other Deployment Options</a>
                            </li>
                            <li><a href="../../../extensions/tut_analytics.html">Google Analytics</a>
                            </li>
                            <li><a href="../../../extensions/themes.html">Publishing Themes</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../extensions/api_index.html">
                        Chrome Platform APIs
                        </a>
                        <ul>
                            <li><a href="../../../extensions/api_index.html">JavaScript APIs</a>
                            </li>
                            <li><a href="../../../extensions/manifest.html">Manifest File Format</a>
                            </li>
                            <li><a href="../../../extensions/api_other.html">Web APIs</a>
                            </li>
                            <li><a href="../../../extensions/permission_warnings.html">Permission Warnings</a>
                            </li>
                            <li><a href="../../../extensions/permissions.html">Optional Permissions</a>
                            </li>
                            <li><a href="../../../extensions/match_patterns.html">Match Patterns</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../extensions/faq">
                        Help
                        </a>
                        <ul>
                            <li><a href="../../../extensions/faq">FAQ</a>
                            </li>
                            <li><a href="https://groups.google.com/a/chromium.org/forum/#!forum/chromium-extensions">Google Groups</a>
                            </li>
                            <li><a href="http://stackoverflow.com/tags/google-chrome-extension/info">Stack Overflow</a>
                            </li>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">Native Client
                  <ul>
                      <li class="category">
                        <a href="../../overview.html">
                        Learn Basics
                        </a>
                        <ul>
                            <li><a href="../../overview.html">What Is Native Client?</a>
                            </li>
                            <li><a href="../../nacl-and-pnacl.html">NaCl and PNaCl</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../sdk/download.html">
                        SDK
                        </a>
                        <ul>
                            <li><a href="../../sdk/download.html">Download SDK</a>
                            </li>
                            <li><a href="../../sdk/examples.html">Examples</a>
                            </li>
                            <li><a href="../../sdk/release-notes.html">SDK Release Notes</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../tutorial/tutorial-part1.html">
                        Tutorial
                        </a>
                        <ul>
                            <li><a href="../tutorial/tutorial-part1.html">Part 1: Simple PNaCl Web App</a>
                            </li>
                            <li><a href="../tutorial/tutorial-part2">Part 2: SDK Build System and Chrome Apps</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="building.html">
                        Development Cycle
                        </a>
                        <ul>
                            <li><a href="building.html">Building</a>
                            </li>
                            <li><a href="running.html">Running</a>
                            </li>
                            <li><a href="debugging.html">Debugging</a>
                            </li>
                            <li><a href="vs-addin.html">Debugging with Visual Studio</a>
                            </li>
                            <li><a href="dynamic-loading.html">Dynamic Linking and Loading with GlibC</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../coding/application-structure.html">
                        Coding Your Application
                        </a>
                        <ul>
                            <li><a href="../coding/application-structure.html">Application Structure</a>
                            </li>
                            <li><a href="../coding/native-client-modules.html">Native Client Modules</a>
                            </li>
                            <li><a href="../coding/3D-graphics.html">3D Graphics</a>
                            </li>
                            <li><a href="../coding/audio.html">Audio</a>
                            </li>
                            <li><a href="../coding/file-io.html">File I/O</a>
                            </li>
                            <li><a href="nacl_io">The nacl_io Library</a>
                            </li>
                            <li><a href="../coding/message-system.html">Messaging System</a>
                            </li>
                            <li><a href="../coding/progress-events.html">Progress Events</a>
                            </li>
                            <li><a href="../coding/url-loading">URL Loading</a>
                            </li>
                            <li><a href="../coding/view-focus-input-events">View Change, Focus, &amp; Input Events</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../distributing.html">
                        Distribute Your Apps
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../pepper_stable/index.html">
                        Pepper API Reference
                        </a>
                        <ul>
                            <li><a href="../../pepper_stable/c/group___interfaces.html">Pepper C Interfaces</a>
                            </li>
                            <li><a href="../../pepper_stable/c/group___structs.html">Pepper C Structures</a>
                            </li>
                            <li><a href="../../pepper_stable/c/group___functions.html">Pepper C Functions</a>
                            </li>
                            <li><a href="../../pepper_stable/c/group___enums.html">Pepper C Enums</a>
                            </li>
                            <li><a href="../../pepper_stable/c/group___typedefs.html">Pepper C Typedefs</a>
                            </li>
                            <li><a href="http://developer.chrome.com/native-client/pepper_stable/c/global_defs">Pepper C Macros</a>
                            </li>
                            <li><a href="../../pepper_stable/cpp/inherits.html">Pepper C++ Classes</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../glossary.html">
                        Additional Reference &amp; Versions
                        </a>
                        <ul>
                            <li><a href="../../glossary.html">Glossary</a>
                            </li>
                            <li><a href="../../reference/nacl-manifest-format.html">Native Client Manifest (nmf) Format</a>
                            </li>
                            <li><a href="../../reference/pnacl-bitcode-abi.html">PNaCl Bitcode Reference Manual</a>
                            </li>
                            <li><a href="../../reference/pnacl-c-cpp-language-support.html">PNaCl C/C++ Language Support</a>
                            </li>
                            <li><a href="../../reference/sandbox_internals/index">Sandbox Internals</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../faq.html">
                        Help
                        </a>
                        <ul>
                            <li><a href="../../faq.html">FAQ</a>
                            </li>
                            <li><a href="../../help.html">Forums &amp; Issues Tracker</a>
                            </li>
                            <li><a href="../../publications-and-presentations">Publications &amp; Presentations</a>
                            </li>
                            <li><a href="../../community/security-contest/index.html">Security Contest Archive</a>
                            </li>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">Store
                  <ul>
                      <li class="category">
                        <a href="../../../webstore/index.html">
                        What Is the Chrome Web Store?
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../webstore/overview.html">
                        What Can You Publish?
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../webstore/get_started_simple.html">
                        Tutorial: Getting Started
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../webstore/samples.html">
                        Samples
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../webstore/branding.html">
                        Branding
                        </a>
                        <ul>
                            <li><a href="../../../webstore/branding.html">Branding Guidelines</a>
                            </li>
                            <li><a href="../../../webstore/images.html">Supplying Images</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../webstore/money.html">
                        Monetizing
                        </a>
                        <ul>
                            <li><a href="../../../webstore/money.html">Monetizing Your App</a>
                            </li>
                            <li><a href="../../../webstore/identify_user.html">Using Google Accounts</a>
                            </li>
                            <li><a href="../../../webstore/check_for_payment.html">Checking for Payment</a>
                            </li>
                            <li><a href="../../../webstore/one_time_payments">One-Time Payments</a>
                            </li>
                            <li><a href="../../../webstore/pricing.html">Pricing</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../webstore/publish.html">
                        Publishing
                        </a>
                        <ul>
                            <li><a href="../../../webstore/publish.html">Publishing Tutorial</a>
                            </li>
                            <li><a href="../../../webstore/i18n.html">Internationalizing Your App</a>
                            </li>
                            <li><a href="../../../webstore/inline_installation.html">Using Inline Installation</a>
                            </li>
                            <li><a href="../../../webstore/rating.html">Rating Guidelines</a>
                            </li>
                            <li><a href="../../../webstore/program_policies.html">Program Policies</a>
                            </li>
                            <li><a href="../../../webstore/terms.html">Terms of Service</a>
                            </li>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../../../webstore/best_practices.html">
                        Help
                        </a>
                        <ul>
                            <li><a href="../../../webstore/best_practices.html">Best Practices</a>
                            </li>
                            <li><a href="../../../webstore/faq.html">FAQ</a>
                            </li>
                            <li><a href="https://groups.google.com/a/chromium.org/forum/#!forum/chromium-apps">Google Groups</a>
                            </li>
                            <li><a href="../../../webstore/articles">Articles</a>
                            </li>
                        </ul>
                      </li>
                  </ul>
                </li>
            </ul>
          </li>
        <li id="search">
          <img src="../../../static/images/search.png">
          <div class="expandee">
      
      <!-- override search styles set globally by site.css -->
      <style>
      .gsc-above-wrapper-area, .gsc-result-info {
        font-size: 11px;
      }
      .gs-webResult div, .gs-result div {
        line-height: initial;
      }
      .gs-webResult a, .gs-result a {
        text-decoration: none;
      }
      td.gcsc-branding-img-noclear, .gcsc-branding-img-noclear a {
        width: 51px;
        height: 15px;
        vertical-align: top;
      }
      .gsc-table-result, .gsc-thumbnail-inside, .gsc-url-top {
        padding: 0;
      }
      .gsc-control-cse tr, .gsc-control-cse td, .gsc-control-cse th {
       padding: inherit;
       border: none;
      }
      .gsc-control-cse {
        white-space: normal;
        border: none;
        padding: 0 1em;
      }
      #search .gsc-control-cse img {
        height: inherit;
        width: inherit;
      }
      .gsc-control-cse table {
        margin: initial;
      }
      .gsc-control-cse * {
        box-sizing: initial;
        -webkit-box-sizing: initial;
        -moz-box-sizing: initial;
      }
      #fatnav .expandee .gsc-control-cse a {
       padding: 0;
       color: inherit;
      }
      </style>
      
            <form id="chrome-docs-cse-search-form" action="http://google.com/cse">
              <input type="search" id="chrome-docs-cse-input" name="q" placeholder="What are you looking for?">
              <input type="hidden" name="cx" value="010997258251033819707:7owyldxmpkc" />
              <input type="hidden" name="ie" value="UTF-8" />
            </form>
            <gcse:searchresults-only gname="results"></gcse:searchresults-only>
          </div>
        </li>
      </ul>
      </nav>
          </header>

    <main id="gc-pagecontent" role="main">


<article class="article-content">
  <div itemprop="articleBody">



<section id="dynamic-linking-and-loading-with-glibc">
<h1 id="dynamic-linking-and-loading-with-glibc">Dynamic Linking and Loading with glibc</h1>
<div class="contents local" id="contents" style="display: none">
<ul class="small-gap">
<li><p class="first"><a class="reference internal" href="dynamic-loading.html#introduction" id="id1">Introduction</a></p>
<ul class="small-gap">
<li><a class="reference internal" href="dynamic-loading.html#c-standard-libraries-glibc-and-newlib" id="id2">C standard libraries: glibc and newlib</a></li>
<li><a class="reference internal" href="dynamic-loading.html#sdk-toolchains" id="id3">SDK toolchains</a></li>
<li><a class="reference internal" href="dynamic-loading.html#specifying-and-delivering-shared-libraries" id="id4">Specifying and delivering shared libraries</a></li>
</ul>
</li>
<li><a class="reference internal" href="dynamic-loading.html#building-a-dynamically-linked-application" id="id5">Building a dynamically linked application</a></li>
<li><a class="reference internal" href="dynamic-loading.html#generating-a-native-client-manifest-file-for-a-dynamically-linked-application" id="id6">Generating a Native Client manifest file for a dynamically linked application</a></li>
<li><a class="reference internal" href="dynamic-loading.html#deploying-a-dynamically-linked-application" id="id7">Deploying a dynamically linked application</a></li>
<li><a class="reference internal" href="dynamic-loading.html#opening-a-shared-library-at-runtime" id="id8">Opening a shared library at runtime</a></li>
<li><a class="reference internal" href="dynamic-loading.html#troubleshooting" id="id9">Troubleshooting</a></li>
</ul>

</div><section id="introduction">
<h2 id="introduction">Introduction</h2>
<aside class="caution">
Portable Native Client currently only supports static linking, and the
only C library available for it is newlib. This page is only valid for
Native Client, though PNaCl will eventually support some form of
dynamic linking.
</aside>
<p>This document describes how to create and deploy dynamically linked and loaded
applications with the glibc library in the Native Client SDK. Before reading
this document, we recommend reading <a class="reference internal" href="building.html"><em>Building Native Client Modules</em></a></p>
<section id="c-standard-libraries-glibc-and-newlib">
<span id="c-libraries"></span><h3 id="c-standard-libraries-glibc-and-newlib"><span id="c-libraries"></span>C standard libraries: glibc and newlib</h3>
<p>The Native Client SDK comes with two C standard libraries &#8212; glibc and
newlib. These libraries are described in the table below.</p>
<table border="1" class="docutils">
<colgroup>
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Library</th>
<th class="head">Linking</th>
<th class="head">License</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>glibc</td>
<td>dynamic
or static</td>
<td>GNU Lesser
General
Public
License
(LGPL)</td>
<td>glibc is the GNU implementation of the
<a class="reference external" href="http://en.wikipedia.org/wiki/POSIX">POSIX</a> standard runtime library for the C
programming language. Designed for
portability and performance, glibc is one
of the most popular implementations of the
C library. It is comprised of a set of
interdependent libraries including libc,
libpthreads, libdl, and others. For
documentation, FAQs, and additional
information about glibc, see <a class="reference external" href="http://www.gnu.org/software/libc/index.html">GLIBC</a></td>
</tr>
<tr class="row-odd"><td>newlib</td>
<td>static</td>
<td>Berkeley
Software
Distribution
(BSD) type
free
software
licenses</td>
<td>newlib is a C library intended for use in
embedded systems. Like glibc, newlib is a
conglomeration of several library parts.
It is available for use under BSD-type free
software licenses, which generally makes it
more suitable to link statically in
commercial, closed-source applications. For
documentation, FAQs, and additional
information about newlib, see the <a class="reference external" href="http://sourceware.org/newlib/">newlib</a>
documentation.</td>
</tr>
</tbody>
</table>
<p>For proprietary (closed-source) applications, your options are to either
statically link to newlib, or dynamically link to glibc. We recommend
dynamically linking to glibc, for a couple of reasons:</p>
<ul class="small-gap">
<li>The glibc library is widely distributed (it&#8217;s included in Linux
distributions), and as such it&#8217;s mature, hardened, and feature-rich. Your
code is more likely to compile out-of-the-box with glibc.</li>
<li>Dynamic loading can provide a big performance benefit for your application if
you can structure the application to defer loading of code that&#8217;s not needed
for initial interaction with the user. It takes some work to put such code in
shared libraries and to load the libraries at runtime, but the payoff is
usually worth it. In future releases, Chrome may also support caching of
common dynamically linked libraries such as libc.so between applications.
This could significantly reduce download size and provide a further potential
performance benefit (for example, the hello_world example would only require
downloading a .nexe file that&#8217;s on the order of 30KB, rather than a .nexe
file and several libraries, which are on the order of 1.5MB).</li>
</ul>
<p>Native Client support for dynamic linking and loading is based on glibc. Thus,
<strong>if your Native Client application must dynamically link and load code (e.g.,
due to licensing considerations), we recommend that you use the glibc
library.</strong></p>
<aside class="note">
<p><strong>Notes:</strong></p>
<ul class="small-gap">
<li><strong>None of the above constitutes legal advice, or a description of the legal
obligations you need to fulfill in order to be compliant with the LGPL or
newlib licenses. The above description is only a technical explanation of
the differences between newlib and glibc, and the choice you must make
between the two libraries.</strong></li>
<li>Static linking with glibc is rarely used. Use this feature with caution.</li>
<li>The standard C++ runtime in Native Client is provided by libstdc++; this
library is independent from and layered on top of glibc. Because of
licensing restrictions, libstdc++ must be statically linked for commercial
uses, even if the rest of an application is dynamically linked.</li>
</ul>

</aside>
</section><section id="sdk-toolchains">
<h3 id="sdk-toolchains">SDK toolchains</h3>
<p>The Native Client SDK contains multiple toolchains, which are differentiated by
<a class="reference internal" href="building.html#target-architectures"><em>target architecture</em></a> and C library:</p>
<table border="1" class="docutils">
<colgroup>
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Target architecture</th>
<th class="head">C library</th>
<th class="head">Toolchain directory</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>x86</td>
<td>newlib</td>
<td>toolchain/&lt;platform&gt;_x86_newlib</td>
</tr>
<tr class="row-odd"><td>x86</td>
<td>glibc</td>
<td>toolchain/&lt;platform&gt;_x86_glibc</td>
</tr>
<tr class="row-even"><td>ARM</td>
<td>newlib</td>
<td>toolchain/&lt;platform&gt;_arm_newlib</td>
</tr>
<tr class="row-odd"><td>PNaCl</td>
<td>newlib</td>
<td>toolchain/&lt;platform&gt;_pnacl</td>
</tr>
</tbody>
</table>
<p>In the directories listed above, &lt;platform&gt; is the platform of your development
machine (i.e., win, mac, or linux). For example, in the Windows SDK, the x86
toolchain that uses glibc is in <code>toolchain/win_x86_glibc</code>.</p>
<aside class="note">
<strong>Note:</strong> The ARM and PNaCl toolchains are currently restricted to newlib.
</aside>
<p>To use the glibc library and dynamic linking in your application, you <strong>must</strong>
use a glibc toolchain. (Currently the only glibc toolchain is
<code>&lt;platform&gt;_x86_glibc</code>.) Note that you must build all code in your application
with one toolchain. Code from multiple toolchains cannot be mixed.</p>
</section><section id="specifying-and-delivering-shared-libraries">
<h3 id="specifying-and-delivering-shared-libraries">Specifying and delivering shared libraries</h3>
<p>One significant difference between newlib and glibc applications is that glibc
applications must explicitly list and deploy the shared libraries that they
use.</p>
<p>In a desktop environment, when the user launches a dynamically linked
application, the operating system&#8217;s program loader determines the set of
libraries the application requires by reading explicit inter-module
dependencies from executable file headers, and loads the required libraries
into the address space of the application process. Typically the required
libraries will have been installed on the system as a part of the application&#8217;s
installation process. Often the desktop application developer doesn&#8217;t know or
think about the libraries that are required by an application, as those details
are taken care of by the user&#8217;s operating system.</p>
<p>In the Native Client sandbox, dynamic linking can&#8217;t rely in the same way on the
operating system or the local file system. Instead, the application developer
must identify the set of libraries that are required by an application, list
those libraries in a Native Client <a class="reference internal" href="../coding/application-structure.html#manifest-file"><em>manifest file</em></a>, and
deploy the libraries along with the application. Instructions for how to build
a dynamically linked Native Client application, generate a Native Client
manifest (.nmf) file, and deploy an application are provided below.</p>
</section></section><section id="building-a-dynamically-linked-application">
<h2 id="building-a-dynamically-linked-application">Building a dynamically linked application</h2>
<p>Applications built with the glibc toolchain will by dynamically linked by
default. Application that load shared libraries at runtime using <code>dlopen()</code>
must link with the libdl library (<code>-ldl</code>).</p>
<p>Like other gcc-based toolchains building a dynamic library for NaCl is normally
done by linking with the <code>-shared</code> flag and compiling with the <code>-fPIC</code> flag.
The SDK build system will do this automatically when the <code>SO_RULE</code> Makefile
rule is used.</p>
<p>The Native Client SDK includes an example that demonstrates how to build a
shared library, and how to use the <code>dlopen()</code> interface to load that library
at runtime (after the application is already running). Many applications load
and link shared libraries at launch rather than at runtime, and hence do not
use the <code>dlopen()</code> interface. The SDK example is nevertheless instructive, as
it demonstrates how to build Native Client modules (.nexe files) and shared
libraries (.so files) with the x86 glibc toolchain, and how to generate a
Native Client manifest file for glibc applications.</p>
<p>The SDK example, located in <code>examples/tutorial/dlopen</code>, includes three C++
files:</p>
<dl class="docutils">
<dt>eightball.cc</dt>
<dd>This file implements the function <code>Magic8Ball()</code>, which is used to provide
whimsical answers to user questions. This file is compiled into a shared
library called <code>libeightball.so</code>. This library gets included in the
.nmf file and is therefore directly loadable with <code>dlopen()</code>.</dd>
<dt>reverse.cc</dt>
<dd>This file implements the function <code>Reverse()</code>, which returns reversed
copies of strings that are passed to it. This file is compiled into a shared
library called <code>libreverse.so</code>. This library is <strong>not</strong> included in the
.nmf file and is loaded via an http mount using the <a class="reference internal" href="../coding/nacl_io.html#nacl-io"><em>nacl_io library</em></a>.</dd>
<dt>dlopen.cc</dt>
<dd>This file implements the Native Client module, which loads the two shared
libraries and handles communcation with with JavaScript. The file is compiled
into a Native Client executable (.nexe).</dd>
</dl>
<p>Run <code>make</code> in the dlopen directory to see the commands the Makefile executes
to build x86 32-bit and 64-bit .nexe and .so files, and to generate a .nmf
file. These commands are described below.</p>
<aside class="note">
<strong>Note:</strong> The Makefiles for most of the examples in the SDK build the
examples using multiple toolchains (x86 newlib, x86 glibc, ARM, and PNaCl).
With a few exceptions (listed in the <a class="reference internal" href="../../sdk/release-notes.html#sdk-release-notes"><em>Release Notes</em></a>), running &#8220;make&#8221; in each example&#8217;s directory builds
multiple versions of the example using the SDK toolchains. The dlopen example
is one of those exceptions – it is only built with the x86 glibc toolchain,
as that is currently the only toolchain that supports glibc and thus dynamic
linking and loading. Take a look at the example Makefiles and the generated
.nmf files for details on how to build dynamically linked applications.
</aside>
</section><section id="generating-a-native-client-manifest-file-for-a-dynamically-linked-application">
<span id="dynamic-loading-manifest"></span><h2 id="generating-a-native-client-manifest-file-for-a-dynamically-linked-application"><span id="dynamic-loading-manifest"></span>Generating a Native Client manifest file for a dynamically linked application</h2>
<p>The Native Client manifest file specifies the name of the executable to run
and must also specify any shared libraries that the application directly
depends on. For indirect dependencies (such as libraries opened via
<code>dlopen()</code>) it is also convenient to list libraries in the manifest file.
However it is possile to load arbitrary shared libraries at runtime that
are not mentioned in the manifest by using the <a class="reference external" href="nacl_io">nacl_io library</a>
to mount a filesystem that contains the shared libraries which will then
allow <code>dlopen()</code> to access them.</p>
<p>In this example we demonstrate both loading directly from via the manifest
file (<code>libeightball.so</code>) and loading indirectly via a http mount
(<code>libreverse.so</code>).</p>
<p>Take a look at the manifest file in the dlopen example to see how
a glibc-style manifest file is structured. (Run <code>make</code> in the dlopen directory to
generate the manifest file if you haven&#8217;t done so already.) Here is an excerpt
from <code>dlopen.nmf</code>:</p>
<pre class="prettyprint">
{
  &quot;files&quot;: {
    &quot;libeightball.so&quot;: {
      &quot;x86-64&quot;: {
        &quot;url&quot;: &quot;lib64/libeightball.so&quot;
      },
      &quot;x86-32&quot;: {
        &quot;url&quot;: &quot;lib32/libeightball.so&quot;
      }
    },
    &quot;libstdc++.so.6&quot;: {
      &quot;x86-64&quot;: {
        &quot;url&quot;: &quot;lib64/libstdc++.so.6&quot;
      },
      &quot;x86-32&quot;: {
        &quot;url&quot;: &quot;lib32/libstdc++.so.6&quot;
      }
    },
    &quot;libppapi_cpp.so&quot;: {
      &quot;x86-64&quot;: {
        &quot;url&quot;: &quot;lib64/libppapi_cpp.so&quot;
      },
      &quot;x86-32&quot;: {
        &quot;url&quot;: &quot;lib32/libppapi_cpp.so&quot;
      }
    },
... etc.
</pre>
<p>In most cases, you can use the <code>create_nmf.py</code> script in the SDK to generate
a manifest file for your application. The script is located in the tools
directory (e.g. <code>pepper_28/tools</code>).</p>
<p>The Makefile in the dlopen example generates the manifest automatically using
the <code>NMF_RULE</code> provided by the SDK build system. Running <code>make V=1</code> will
show the full command line which is used to generate the nmf:</p>
<pre class="prettyprint">
create_nmf.py -o dlopen.nmf glibc/Release/dlopen_x86_32.nexe \
   glibc/Release/dlopen_x86_64.nexe glibc/Release/libeightball_x86_32.so \
   glibc/Release/libeightball_x86_64.so  -s ./glibc/Release \
   -n libeightball_x86_32.so,libeightball.so \
   -n libeightball_x86_64.so,libeightball.so
</pre>
<p>Run python <code>create_nmf.py --help</code> to see a full description of the command-line
flags. A few of the important flags are described below.</p>
<dl class="docutils">
<dt><code>-s</code> <em>directory</em></dt>
<dd>use <em>directory</em> to stage libraries (libraries are added to <code>lib32</code> and
<code>lib64</code> subfolders)</dd>
<dt><code>-L</code> <em>directory</em></dt>
<dd>add <em>directory</em> to the library search path. The default search path
already includes the toolchain and SDK libraries directories.</dd>
</dl>
<aside class="note">
<strong>Note:</strong> The <code>create_nmf</code> script can only automatically detect explicit
shared library dependencies (for example, dependencies specified with the -l
flag for the compiler/linker). If you want to include libraries that you
intend to dlopen() at runtime you must explcitly list them in your call to
<code>create_nmf</code>.
</aside>
<p>As an alternative to using <code>create_nmf</code>, it is possible to manually calculate
the list of shared library dependencies using tools such as <code>objdump_</code>.</p>
</section><section id="deploying-a-dynamically-linked-application">
<h2 id="deploying-a-dynamically-linked-application">Deploying a dynamically linked application</h2>
<p>As described above, an application&#8217;s manifest file must explicitly list all the
executable code modules that the application directly depends on, including
modules from the application itself (.nexe and .so files), modules from the
Native Client SDK (e.g., libppapi_cpp.so), and perhaps also modules from
<a class="reference external" href="http://developer.chrome.com/native-client/devguide/devcycle/naclports_">naclport</a> or from <a class="reference internal" href="../../community/middleware.html"><em>middleware systems</em></a> that
the application uses. You must provide all of those modules as part of the
application deployment process.</p>
<p>As explained in <a class="reference internal" href="../distributing.html"><em>Distributing Your Application</em></a>, there are two basic ways to deploy an application:</p>
<ul class="small-gap">
<li><strong>hosted application:</strong> all modules are hosted together on a web server of
your choice</li>
<li><strong>packaged application:</strong> all modules are packaged into one file, hosted in
the Chrome Web Store, and downloaded to the user&#8217;s machine</li>
</ul>
<p>You must deploy all the modules listed in your application&#8217;s manifest file for
either the hosted application or the packaged application case. For hosted
applications, you must upload the modules to your web server. For packaged
applications, you must include the modules in the application&#8217;s Chrome Web
Store .crx file. Modules should use URLs/names that are consistent with those
in the Native Client manifest file, and be named relative to the location of
the manifest file. Remember that some of the libraries named in the manifest
file may be located in directories you specified with the -L option to
<code>create_nmf.py</code>. You are free to rename/rearrange files and directories
referenced by the Native Client manifest file, so long as the modules are
available in the locations indicated by the manifest file. If you move or
rename modules, it may be easier to re-run <code>create_nmf.py</code> to generate a new
manifest file rather than edit the original manifest file. For hosted
applications, you can check for name mismatches during testing by watching the
request log of the web server hosting your test deployment.</p>
</section><section id="opening-a-shared-library-at-runtime">
<h2 id="opening-a-shared-library-at-runtime">Opening a shared library at runtime</h2>
<p>Native Client supports a version of the POSIX standard <code>dlopen()</code> interface
for opening libraries explicitly, after an application is already running.
Calling <code>dlopen()</code> may cause a library download to occur, and automatically
loads all libraries that are required by the named library.</p>
<aside class="note">
<strong>Caution:</strong> Since <code>dlopen()</code> can potentially block, you must initially
call <code>dlopen()</code> off your application&#8217;s main thread. Initial calls to
<code>dlopen()</code> from the main thread will always fail in the current
implementation of Native Client.
</aside>
<p>The best practice for opening libraries with <code>dlopen()</code> is to use a worker
thread to pre-load libraries asynchronously during initialization of your
application, so that the libraries are available when they&#8217;re needed. You can
call <code>dlopen()</code> a second time when you need to use a library &#8211; per the
specification, subsequent calls to <code>dlopen()</code> return a handle to the
previously loaded library. Note that you should only call <code>dlclose()</code> to
close a library when you no longer need the library; otherwise, subsequent
calls to <code>dlopen()</code> could cause the library to be fetched again.</p>
<p>The dlopen example in the SDK demonstrates how to open a shared libraries
at runtime. To reiterate, the example includes three C++ files:</p>
<ul class="small-gap">
<li><code>eightball.cc</code>: this is the shared library that implements the function
<code>Magic8Ball()</code> (this file is compiled into libeightball.so)</li>
<li><code>reverse.cc</code>: this is the shared library that implements the function
<code>Reverse()</code> (this file is compiled into libreverse.so)</li>
<li><code>dlopen.cc</code>: this is the Native Client module that loads the shared libraries
and makes calls to <code>Magic8Ball()</code> and <code>Reverse()</code> in response to requests
from JavaScript.</li>
</ul>
<p>When the Native Client module starts, it kicks off a worker thread that calls
<code>dlopen()</code> to load the two shared libraries. Once the module has a handle to
the library, it fetches the addresses of the <code>Magic8Ball()</code> and <code>Reverse()</code>
functions using <code>dlsym()</code>. When a user types in a query and clicks the &#8216;ASK!&#8217;
button, the module calls <code>Magic8Ball()</code> to generate an answer, and returns
the result to the user. Likewise when the user clicks the &#8216;Reverse&#8217; button
it calls the <code>Reverse()</code> function to reverse the string.</p>
</section><section id="troubleshooting">
<h2 id="troubleshooting">Troubleshooting</h2>
<p>If your .nexe isn&#8217;t loading, the best place to look for information that can
help you troubleshoot the JavaScript console and standard output from Chrome.
See <a class="reference internal" href="debugging.html#devcycle-debugging"><em>Debugging</em></a> for more information.</p>
<p>Here are a few common error messages and explanations of what they mean:</p>
<dl class="docutils">
<dt><strong>/main.nexe: error while loading shared libraries: /main.nexe: failed to allocate code and data space for executable</strong></dt>
<dd>The .nexe may not have been compiled correctly (e.g., the .nexe may be
statically linked). Try cleaning and recompiling with the glibc toolchain.</dd>
<dt><strong>/main.nexe: error while loading shared libraries: libpthread.so.xxxx: cannot open shared object file: Permission denied</strong></dt>
<dd>(xxxx is a version number, for example, 5055067a.) This error can result from
having the wrong path in the .nmf file. Double-check that the path in the
.nmf file is correct.</dd>
<dt><strong>/main.nexe: error while loading shared libraries: /main.nexe: cannot open shared object file: No such file or directory</strong></dt>
<dd>If there are no obvious problems with your main.nexe entry in the .nmf file,
check where main.nexe is being requested from. Use Chrome&#8217;s Developer Tools:
Click the menu icon <img alt="menu-icon" src="../../images/menu-icon.png" />, select Tools &gt; Developer Tools, click the
Network tab, and look at the path in the Name column.</dd>
<dt><strong>NaCl module load failed: ELF executable text/rodata segment has wrong starting address</strong></dt>
<dd>This error happens when using a newlib-style .nmf file instead of a
glibc-style .nmf file. Make sure you build your application with the glic
toolchain, and use the create_nmf.py script to generate your .nmf file.</dd>
<dt><strong>NativeClient: NaCl module load failed: Nexe crashed during startup</strong></dt>
<dd>This error message indicates that a module crashed while being loaded. You
can determine which module crashed by looking at the Network tab in Chrome&#8217;s
Developer Tools (see above). The module that crashed will be the last one
that was loaded.</dd>
<dt><strong>/lib/main.nexe: error while loading shared libraries: /lib/main.nexe: only ET_DYN and ET_EXEC can be loaded</strong></dt>
<dd>This error message indicates that there is an error with the .so files listed
in the .nmf file &#8211; either the files are the wrong type or kind, or an
expected library is missing.</dd>
<dt><strong>undefined reference to &#8216;dlopen&#8217; collect2: ld returned 1 exit status</strong></dt>
<dd>This is a linker ordering problem that usually results from improper ordering
of command line flags when linking. Reconfigure your command line string to
list libraries after the -o flag.</dd>
</dl>
</section></section>
    
    <footer id="cc-info">
      <button id="send-feedback" class="google-button" data-feedback>Send Feedback</button>
      <!--p class="last-updated">Last updated August 2, 2013.</p-->
      <p class="cc-logo"><a href="http://creativecommons.org/licenses/by/3.0/"><img src="../../../static/images/cc_by.png" alt="Licensed Creative Commons by Attribution"></a></p>
    </footer>
    <nav class="inline-toc no-permalink">
      <section class="related">
                      <h3 title="">Development Cycle</h3>
      <ol class="toc">
                              <li>
                                <a href="building.html">Building</a>
                              </li>
                              <li>
                                <a href="running.html">Running</a>
                              </li>
                              <li>
                                <a href="debugging.html">Debugging</a>
                              </li>
                              <li>
                                <a href="vs-addin.html">Debugging with Visual Studio</a>
                              </li>
                              <li>
                                <a href="dynamic-loading.html" class="active">Dynamic Linking and Loading with GlibC</a>
                              </li>
      </ol>
      </section>
      <section id="toc">
    <h3>Contents</h3>
    <ol class="toc">
      <li class="toplevel"><a data-list-item href="dynamic-loading.html#introduction"
          >Introduction</a>
      </li>
      <li class="toplevel"><a data-list-item href="dynamic-loading.html#c-standard-libraries-glibc-and-newlib"
          >C standard libraries: glibc and newlib</a>
      </li>
      <li class="toplevel"><a data-list-item href="dynamic-loading.html#sdk-toolchains"
          >SDK toolchains</a>
      </li>
      <li class="toplevel"><a data-list-item href="dynamic-loading.html#specifying-and-delivering-shared-libraries"
          >Specifying and delivering shared libraries</a>
      </li>
      <li class="toplevel"><a data-list-item href="dynamic-loading.html#building-a-dynamically-linked-application"
          >Building a dynamically linked application</a>
      </li>
      <li class="toplevel"><a data-list-item href="dynamic-loading.html#generating-a-native-client-manifest-file-for-a-dynamically-linked-application"
          >Generating a Native Client manifest file for a dynamically linked application</a>
      </li>
      <li class="toplevel"><a data-list-item href="dynamic-loading.html#deploying-a-dynamically-linked-application"
          >Deploying a dynamically linked application</a>
      </li>
      <li class="toplevel"><a data-list-item href="dynamic-loading.html#opening-a-shared-library-at-runtime"
          >Opening a shared library at runtime</a>
      </li>
      <li class="toplevel"><a data-list-item href="dynamic-loading.html#troubleshooting"
          >Troubleshooting</a>
      </li>
    </ol>
</section>

    </nav>
  </div>
</article>
    </main>

    <footer id="gc-footer" role="contentinfo" class="span-full">
      <div class="g-section g-tpl-50-50">
        <div class="g-unit g-first">
          <nav class="links">
            <a href="https://www.google.com/">Google</a><a href="https://developers.google.com/site-terms">Terms of Service</a><a href="http://www.google.com/intl/en/privacy/">Privacy Policy</a><a href="dynamic-loading.html" data-feedback>Report a bug</a>
          </nav>
        </div>
        <div class="g-unit g-last">
          <div id="social-buttons">
            <div data-size="small" data-href="http://www.google.com/chrome" data-annotation="bubble" class="g-plusone"></div>
            <a rel="publisher" target="_blank" href="https://plus.google.com/+GoogleChromeDevelopers?prsrc=3" data-g-label="plus" data-g-event="nav-subfooter">Add us on <span class="element-invisible">Google+</span><img src="http://ssl.gstatic.com/images/icons/gplus-16.png" data-g-label="plus" data-g-event="nav-subfooter" alt=""></a>
          </div>
        </div>
      </div>
    </footer>

  </div>

    <script src="../../../static/js/fatnav.js"></script>
    <script src="../../../static/js/article.js"></script>
    <script src="../../../static/js/prettify.js"></script>
    <script src="../../../static/js/search.js"></script>
    <script src="http://www.gstatic.com/feedback/api.js"></script>
    <script src="../../../static/js/site.js"></script>
  </body>
</html>
